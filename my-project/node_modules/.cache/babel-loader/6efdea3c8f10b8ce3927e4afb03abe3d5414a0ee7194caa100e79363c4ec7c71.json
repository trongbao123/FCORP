{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport const isAuthor = (currentUser, author) => currentUser === author;\nexport const saveComments = (propBook, Comment, Cancel, code) => {\n  const data = {\n    ...propBook,\n    comments: Comment\n  };\n  if (Cancel, code) {\n    handleCancelOrEdit(Cancel, code);\n  }\n  const jsonData = JSON.stringify(data);\n  localStorage.setItem(\"comments\", jsonData);\n};\nexport const addComment = (book, Comment, newComment) => {\n  const data = {\n    bookId: book.id,\n    id: Comment.length + 1,\n    author: \"Bảo\",\n    content: newComment,\n    PublishDate: new Date(),\n    replies: []\n  };\n  if (book.id) {\n    Comment.push(data);\n    saveComments(book, Comment);\n  }\n  return Comment;\n};\nexport const deleteComment = (comments, commentId, propBook) => {\n  console.log(comments, \"delete\");\n  const index = comments.findIndex(comment => comment.id === commentId);\n  comments.splice(index, 1);\n  localStorage.clear();\n  saveComments(propBook, comments);\n};\nexport const addReplyComment = (params, newReplyContent, propBook, Comment) => {\n  const newCommentOrReply = {\n    id: params.id++,\n    author: \"Bảo\",\n    content: newReplyContent,\n    editing: false,\n    PublishDate: new Date(),\n    replies: []\n  };\n  params.replies.push(newCommentOrReply);\n  saveComments(propBook, Comment);\n  return params;\n};\nexport const deleteReply = (replyId, propBook, CommentArray) => {\n  console.log(replyId, propBook, CommentArray);\n  const deleteComment = () => {\n    console.log(CommentArray, \"ádasd\");\n    for (let i = 0; i < CommentArray.length; i++) {\n      const reply = CommentArray.replies[i];\n      if (reply.id === replyId) {\n        CommentArray.replies.splice(i, 1);\n        return true;\n      }\n      if (reply.replies && deleteComment(reply)) {\n        return true;\n      }\n    }\n    return false;\n  };\n  console.log(deleteComment());\n  for (let i = 0; i < CommentArray.length; i++) {\n    const comment = CommentArray[i];\n    console.log(comment, \"456\");\n    const reply = comment.replies.find(r => r.id === replyId);\n    console.log(reply, \"789\");\n    if (reply !== undefined) {\n      deleteComment(comment);\n      saveComments(propBook, CommentArray);\n      return true;\n    }\n  }\n  saveComments(propBook, CommentArray);\n  return false;\n};\nexport const handleCancelOrEdit = (comment, code) => {\n  let CodeParams = Number;\n  if (code === 1) {\n    CodeParams = comment.editing = false;\n  } else if (code === 0) {\n    CodeParams = comment.editing = true;\n  }\n  return CodeParams;\n};","map":{"version":3,"names":["isAuthor","currentUser","author","saveComments","propBook","Comment","Cancel","code","data","comments","handleCancelOrEdit","jsonData","JSON","stringify","localStorage","setItem","addComment","book","newComment","bookId","id","length","content","PublishDate","Date","replies","push","deleteComment","commentId","console","log","index","findIndex","comment","splice","clear","addReplyComment","params","newReplyContent","newCommentOrReply","editing","deleteReply","replyId","CommentArray","i","reply","find","r","undefined","CodeParams","Number"],"sources":["C:/Users/Admin/Desktop/Test-FCORB-FE/my-project/src/Methods/CommentMethod.js"],"sourcesContent":["export const isAuthor = (currentUser, author) => currentUser === author\r\n\r\nexport const saveComments = (propBook, Comment, Cancel, code) => {\r\n  const data = {\r\n    ...propBook,\r\n    comments: Comment\r\n  }\r\n\r\n  if ((Cancel, code)) {\r\n    handleCancelOrEdit(Cancel, code)\r\n  }\r\n\r\n  const jsonData = JSON.stringify(data)\r\n  localStorage.setItem(\"comments\", jsonData)\r\n}\r\n\r\nexport const addComment = (book, Comment, newComment) => {\r\n  const data = {\r\n    bookId: book.id,\r\n    id: Comment.length + 1,\r\n    author: \"Bảo\",\r\n    content: newComment,\r\n    PublishDate: new Date(),\r\n    replies: []\r\n  }\r\n\r\n  if (book.id) {\r\n    Comment.push(data)\r\n    saveComments(book, Comment)\r\n  }\r\n\r\n  return Comment\r\n}\r\n\r\nexport const deleteComment = (comments, commentId, propBook) => {\r\n  console.log(comments, \"delete\")\r\n  const index = comments.findIndex((comment) => comment.id === commentId)\r\n  comments.splice(index, 1)\r\n  localStorage.clear()\r\n  saveComments(propBook, comments)\r\n}\r\n\r\nexport const addReplyComment = (params, newReplyContent, propBook, Comment) => {\r\n  const newCommentOrReply = {\r\n    id: params.id++,\r\n    author: \"Bảo\",\r\n    content: newReplyContent,\r\n    editing: false,\r\n    PublishDate: new Date(),\r\n    replies: []\r\n  }\r\n  params.replies.push(newCommentOrReply)\r\n\r\n  saveComments(propBook, Comment)\r\n  return params\r\n}\r\n\r\nexport const deleteReply = (replyId, propBook, CommentArray) => {\r\n  console.log(replyId, propBook, CommentArray)\r\n  const deleteComment = () => {\r\n    console.log(CommentArray, \"ádasd\")\r\n    for (let i = 0; i < CommentArray.length; i++) {\r\n      const reply = CommentArray.replies[i]\r\n      if (reply.id === replyId) {\r\n        CommentArray.replies.splice(i, 1)\r\n        return true\r\n      }\r\n      if (reply.replies && deleteComment(reply)) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  console.log(deleteComment())\r\n  for (let i = 0; i < CommentArray.length; i++) {\r\n    const comment = CommentArray[i]\r\n    console.log(comment, \"456\")\r\n    const reply = comment.replies.find((r) => r.id === replyId)\r\n    console.log(reply, \"789\")\r\n    if (reply !== undefined) {\r\n      deleteComment(comment)\r\n      saveComments(propBook, CommentArray)\r\n      return true\r\n    }\r\n  }\r\n\r\n  saveComments(propBook, CommentArray)\r\n  return false\r\n}\r\n\r\nexport const handleCancelOrEdit = (comment, code) => {\r\n  let CodeParams = Number\r\n  if (code === 1) {\r\n    CodeParams = comment.editing = false\r\n  } else if (code === 0) {\r\n    CodeParams = comment.editing = true\r\n  }\r\n  return CodeParams\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}